<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êàë‰ª¨ÁöÑ‰∫ëÁ´ØÊÅãÁà±Êó•ËÆ∞ |Âº†xx &Âñªxx</title>
    <style>
        :root {
            --primary: #ff6b9e;
            --secondary: #6bd5ff;
            --bg: #fef6f9;
            --text: #333;
            --card: white;
        }
        /* ÈöêÁßÅÈÅÆÁΩ©Ê†∑ÂºèÔºàÂ∑≤ÁßªÈô§ÂäüËÉΩÔºå‰ªÖ‰øùÁïôÊ†∑Âºè‰ª•Èò≤ÂêéÁª≠ÈúÄË¶ÅÔºâ */
        .privacy-mask, .privacy-mask * {
            color: transparent !important;
            text-shadow: 0 0 8px #888, 0 0 12px #ccc;
            user-select: none !important;
            cursor: not-allowed !important;
        }
        .privacy-mask input, .privacy-mask textarea {
            background: #eee !important;
            color: transparent !important;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: var(--text);
            background-color: var(--bg);
            margin: 0;
            padding: 0;
            background-image: radial-gradient(circle at 10% 20%, rgba(255, 200, 239, 0.2) 0%, rgba(255, 255, 255, 0) 50%);
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            text-align: center;
            padding: 3rem 1rem;
            position: relative;
            overflow: hidden;
        }
        
        .hearts {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
        }
        
        .heart {
            position: absolute;
            opacity: 0;
            font-size: 1.5rem;
            animation: float 6s ease-in infinite;
        }
        
        @keyframes float {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        h1 {
            font-size: 2.5rem;
            margin: 0;
            position: relative;
            z-index: 1;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-top: 0.5rem;
            position: relative;
            z-index: 1;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
            box-sizing: border-box;
        }
        
        .memory-counter {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 2rem;
            border-radius: 10px;
            text-align: center;
            margin: 2rem 0;
            position: relative;
            overflow: hidden;
            box-sizing: border-box;
        }
        
        .counter-number {
            font-size: 3rem;
            font-weight: bold;
            margin: 0.5rem 0;
        }
        
        .counter-label {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .small {
            font-size: 0.8em;
            opacity: 0.8;
        }
        
        .timeline {
            position: relative;
            padding-left: 50px;
            margin: 3rem 0;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(to bottom, var(--primary), var(--secondary));
            border-radius: 2px;
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 2.5rem;
        }
        
        .timeline-date {
            position: absolute;
            left: -50px;
            width: 40px;
            text-align: right;
            color: var(--primary);
            font-weight: bold;
        }
        
        .timeline-content {
            background-color: var(--card);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            position: relative;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .timeline-content:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        

        
        .timeline-content::before {
            content: '';
            position: absolute;
            left: -15px;
            top: 20px;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background-color: var(--primary);
            border: 3px solid var(--bg);
        }
        
        h2 {
            color: var(--primary);
            margin-top: 0;
            font-size: 1.5rem;
        }
        
        /* Êó∂Èó¥ËΩ¥Ê†áÈ¢òÊ†∑Âºè */
        .timeline-title {
            font-size: 1.6rem;
            font-weight: 700;
            background: linear-gradient(135deg, #ff6b9e, #6bd5ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1.2rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            letter-spacing: 0.5px;
        }
        
        /* Êó∂Èó¥ËΩ¥ÂÜÖÂÆπÊñáÂ≠óÊ†∑Âºè */
        .timeline-text {
            font-size: 1.05rem;
            line-height: 1.8;
            color: #444;
            margin-bottom: 1rem;
            text-align: justify;
            font-family: 'Microsoft YaHei', 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
        }
        
        /* Êó∂Èó¥ËΩ¥ÂºïÁî®Ê†∑Âºè */
        .timeline-quote {
            font-style: italic;
            padding: 1.2rem;
            border-left: 4px solid #ff6b9e;
            background: linear-gradient(135deg, #fff6fa 0%, #f6fff9 100%);
            margin: 1.5rem 0;
            border-radius: 0 8px 8px 0;
            font-size: 1.1rem;
            line-height: 1.7;
            color: #555;
            box-shadow: 0 2px 8px rgba(255, 107, 158, 0.1);
        }
        
        /* Êó∂Èó¥ËΩ¥ÂàóË°®Ê†∑Âºè */
        .timeline-list {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }
        
        .timeline-list li {
            margin-bottom: 0.8rem;
            color: #555;
            line-height: 1.6;
            position: relative;
            padding-left: 0.5rem;
        }
        
        .timeline-list li::before {
            content: 'üíñ';
            position: absolute;
            left: -1.2rem;
            top: 0.1rem;
            font-size: 0.9rem;
        }
        
        .media-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 1rem;
        }
        
        .media-item {
            border-radius: 8px;
            overflow: hidden;
            height: 150px;
            background-size: cover;
            background-position: center;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .media-item:hover {
            transform: scale(1.05);
        }
        
        /* ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•Êó∂ÁöÑÊ†∑Âºè */
        .media-item.img-loading-failed {
            background-color: #f8f9fa;
            border: 2px dashed #dee2e6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            font-size: 0.9rem;
            text-align: center;
            padding: 1rem;
        }
        
        .media-item.img-loading-failed::before {
            content: 'üñºÔ∏è';
            font-size: 2rem;
            margin-bottom: 0.5rem;
            display: block;
        }
        
        .quote {
            font-style: italic;
            padding: 1rem;
            border-left: 3px solid var(--primary);
            background-color: rgba(255, 107, 158, 0.1);
            margin: 1rem 0;
        }
        
        footer {
            text-align: center;
            padding: 2rem;
            color: #666;
            font-size: 0.9rem;
        }
        
        /* Á∫™ÂøµÊó•ÂºπÁ™óÊ†∑Âºè */
        .anniversary-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.5s;
        }
        
        .anniversary-content {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            max-width: 500px;
            text-align: center;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* ÂÆûÊó∂Êó∂ÈíüÊ†∑Âºè */
        .real-time-clock {
            background: rgba(255,255,255,0.2);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            display: inline-block;
            margin-top: 0.5rem;
        }
        
        /* ‰∫íÂä®ÊåâÈíÆ */
        .interactive-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            margin: 0.5rem;
            transition: transform 0.3s;
        }
        
        .interactive-btn:hover {
            transform: scale(1.05);
        }
        
        @media (max-width: 900px) {
            .container {
                padding: 1.2rem;
            }
        }
        @media (max-width: 768px) {
            .container { padding: 0.5rem; }
            .memory-counter {
                padding: 1.1rem 0.5rem;
                margin: 1.1rem 0;
            }
            .timeline { padding-left: 18px; }
            .timeline-date { left: -18px; width: 18px; font-size: 0.8rem; }
            h1 { font-size: 1.3rem; }
            .counter-number { font-size: 1.2rem; }
            .media-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 6px;
            }
            .media-item {
                height: 90px;
            }
            .anniversary-content {
                padding: 1.1rem 0.5rem;
                max-width: 98vw;
            }
            #quit-smoking-modal > div {
                padding: 1.1rem 0.5rem 1rem 0.5rem !important;
                max-width: 98vw !important;
            }
            #custom-dialog-box {
                padding: 1.1rem 0.5rem 1rem 0.5rem !important;
                max-width: 98vw !important;
            }
            .interactive-btn {
                font-size: 0.95rem;
                padding: 0.4rem 0.7rem;
            }
        }
        @media (max-width: 480px) {
            .container { padding: 0.2rem; }
            .memory-counter {
                padding: 0.7rem 0.2rem;
                margin: 0.7rem 0;
            }
            .media-grid {
                grid-template-columns: 1fr;
                gap: 4px;
            }
            .media-item {
                height: 60vw;
                min-height: 80px;
            }
            .anniversary-content, #quit-smoking-modal > div, #custom-dialog-box {
                padding: 0.7rem 0.2rem 0.7rem 0.2rem !important;
                max-width: 99vw !important;
            }
            .interactive-btn {
                font-size: 0.9rem;
                padding: 0.3rem 0.5rem;
            }
        }
    </style>
</head>
<body>
    <div id="privacy-mask-root">
    <!-- ÈÄöÁî®Ëá™ÂÆö‰πâÂºπÁ™óÁªÑ‰ª∂Ôºàalert/prompt/confirmÔºâ -->
    <div id="custom-dialog-mask" style="display:none;position:fixed;z-index:200000;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.35);justify-content:center;align-items:center;"></div>
    <div id="custom-dialog" style="display:none;position:fixed;z-index:200001;top:0;left:0;width:100vw;height:100vh;justify-content:center;align-items:center;">
      <div id="custom-dialog-box" style="background:#fff;padding:1.5rem 1.2rem 1.2rem 1.2rem;border-radius:16px;max-width:340px;width:90vw;box-shadow:0 8px 32px #0005;position:relative;text-align:center;">
        <div id="custom-dialog-title" style="font-size:1.15rem;color:#ff6b9e;margin-bottom:0.7rem;"></div>
        <div id="custom-dialog-content" style="color:#333;font-size:1.05rem;margin-bottom:1rem;word-break:break-all;"></div>
        <input id="custom-dialog-input" style="display:none;width:90%;margin-bottom:1rem;padding:0.5rem;border-radius:8px;border:1px solid #eee;font-size:1rem;" />
        <div style="margin-top:0.5rem;">
          <button id="custom-dialog-ok" class="interactive-btn" style="min-width:60px;margin:0 0.5rem;">Á°ÆÂÆö</button>
          <button id="custom-dialog-cancel" class="interactive-btn" style="background:#fff6fa;color:#ff6b9e;border:1px solid #ffb6d5;min-width:60px;margin:0 0.5rem;display:none;">ÂèñÊ∂à</button>
        </div>
      </div>
    </div>
    <div id="quit-smoking-modal" style="display:none;position:fixed;z-index:100000;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.85);justify-content:center;align-items:center;">
        <div style="background:#fff;padding:2rem 1.5rem 1.2rem 1.5rem;border-radius:18px;max-width:370px;width:92vw;box-shadow:0 8px 32px #0005;position:relative;text-align:center;">
            <button onclick="closeQuitSmokingModal()" style="position:absolute;top:10px;right:16px;font-size:1.5rem;background:none;border:none;color:#888;cursor:pointer;">√ó</button>
            <h2 style="color:#ff6b9e;margin-bottom:0.7rem;">ÊàíÁÉüÊâìÂç°</h2>
            <div id="qs-days" style="font-size:1.7rem;font-weight:bold;margin-bottom:0.2rem;"></div>
            <div id="qs-streaks" style="color:#6bd5ff;font-size:1.05rem;margin-bottom:0.2rem;"></div>
            <div id="qs-last-date" style="color:#888;font-size:0.95rem;margin-bottom:0.7rem;"></div>
            <button id="qs-punch-btn" class="interactive-btn" style="margin-bottom:0.7rem;">‰ªäÊó•ÊâìÂç°</button>
            <button id="qs-reset-btn" class="interactive-btn" style="background:#fff6fa;color:#ff6b9e;border:1px solid #ffb6d5;margin-left:0.5rem;margin-bottom:0.7rem;">ÈáçÁΩÆÊâìÂç°</button>
            <div id="qs-msg" style="margin-top:0.3rem;color:#6bd5ff;font-size:1.1rem;"></div>
            <div id="qs-history" style="margin-top:0.7rem;text-align:left;font-size:0.98rem;background:#f6faff;border-radius:10px;padding:0.7rem 0.7rem 0.5rem 0.7rem;max-height:120px;overflow-y:auto;"></div>
        </div>
    </div>
    <header>
        <div class="hearts" id="hearts-container"></div>
        <!-- ‰∏ªÊ†áÈ¢òÔºåËøûÁª≠ÁÇπÂáª5Ê¨°ÂèØËøõÂÖ•ÊàíÁÉüÊâìÂç°È°µÈù¢ÔºàÈöêËóèÂÖ•Âè£Ôºâ -->
        <h1 id="main-title">Êàë‰ª¨ÁöÑ‰∫ëÁ´ØÊÅãÁà±Êó•ËÆ∞</h1>
        <div class="subtitle">Âº†xx ‚ù§Ô∏èÂñªxx | ÂºÄÂßã‰∫é <span id="start-date">2025Âπ¥8Êúà2Êó•</span></div>
        <div class="real-time-clock" id="current-time">Ê≠£Âú®Âä†ËΩΩÊó∂Èó¥...</div>
    </header>

    <canvas id="bg-bubbles-canvas" style="position:fixed;z-index:0;top:0;left:0;width:100vw;height:100vh;pointer-events:none;"></canvas>
    <canvas id="bg-bubbles-canvas" style="position:fixed;z-index:0;top:0;left:0;width:100vw;height:100vh;pointer-events:none;"></canvas>
    
    <div class="container">
        <!-- ÊÅãÁà±Âä®ÊÄÅÂå∫Âùó -->
        <div class="memory-counter" style="background: #f6fff9; color: #6bd5ff; margin-bottom:2rem;">
            <h2 style="color:#6bd5ff;">ÊÅãÁà±Âä®ÊÄÅ</h2>
            <div id="love-feed-list" style="min-height:2.5em;font-size:1.08rem;line-height:1.7;"></div>
            <div id="love-feed-loading" style="color:#bbb;font-size:0.95rem;">Âä®ÊÄÅÂä†ËΩΩ‰∏≠...</div>
        </div>
        <div class="memory-counter">
            <div class="counter-label">Êàë‰ª¨Â∑≤ÁªèÁõ∏Áà±</div>
            <div class="counter-number" id="days-together">0Â§©</div>
            <div class="counter-label" id="next-anniversary">Ë∑ùÁ¶ª100Â§©Á∫™ÂøµÊó•ËøòÊúâ83Â§©</div>
            <button class="interactive-btn" onclick="showMemoryPrompt()">Ê∑ªÂä†Êñ∞ÂõûÂøÜ</button>
            <button class="interactive-btn" style="background:#fff6fa;color:#ff6b9e;border:1px solid #ffb6d5;" onclick="showLuckyNote()">ÊäΩ‰∏ÄÊîØÂπ∏ËøêÁ≠æ</button>
            <button class="interactive-btn" style="background:#f6fff9;color:#6bd5ff;border:1px solid #b6eaff;" onclick="showLoveQuiz()">ÊÉÖ‰æ£ÈªòÂ•ëÈóÆÁ≠î</button>
        </div>

        <!-- ÁîúËúúÁõ∏ÂÜå‰∫íÂä®Âå∫Âùó -->
        <div class="memory-counter" style="background: #fff6fa; color: #ff6b9e; margin-bottom:2rem;">
            <h2 style="color:#ff6b9e;">ÁîúËúúÁõ∏ÂÜå</h2>
            <!-- Áõ∏ÂÜåÈ°∫Â∫èÂ¶ÇÈúÄË∞ÉÊï¥ËØ∑ÂêåÊ≠•‰øÆÊîπorderÂ±ûÊÄßÂíåÊ≥®Èáä -->
            <div class="media-grid" style="grid-auto-flow: row;">
                <!-- 1. Á¨¨‰∏ÄÂº†ÁÖßÁâáÔºöÂæÆ‰ø°ÂõæÁâá_2025-08-07_084038_490.jpg -->
                <div class="media-item" data-img="ÂæÆ‰ø°ÂõæÁâá_2025-08-07_084038_490.jpg" style="background-image: url('ÂæÆ‰ø°ÂõæÁâá_2025-08-07_084038_490.jpg'); position:relative; order:1;" onclick="showImageModal('ÂæÆ‰ø°ÂõæÁâá_2025-08-07_084038_490.jpg')">
                    <div class="img-blur-mask"></div>
                </div>
                <!-- 2. Á¨¨‰∫åÂº†ÁÖßÁâáÔºöÂæÆ‰ø°ÂõæÁâá_2025-08-08_094627_680.jpg -->
                <div class="media-item" data-img="ÂæÆ‰ø°ÂõæÁâá_2025-08-08_094627_680.jpg" style="background-image: url('ÂæÆ‰ø°ÂõæÁâá_2025-08-08_094627_680.jpg'); position:relative; order:2;" onclick="showImageModal('ÂæÆ‰ø°ÂõæÁâá_2025-08-08_094627_680.jpg')">
                    <div class="img-blur-mask"></div>
                </div>
                <!-- 3. Á¨¨‰∏âÂº†ÁÖßÁâáÔºöÂæÆ‰ø°ÂõæÁâá_2025-08-07_084553_312.png -->
                <div class="media-item" data-img="ÂæÆ‰ø°ÂõæÁâá_2025-08-07_084553_312.png" style="background-image: url('ÂæÆ‰ø°ÂõæÁâá_2025-08-07_084553_312.png'); position:relative; order:3;" onclick="showImageModal('ÂæÆ‰ø°ÂõæÁâá_2025-08-07_084553_312.png')">
                    <div class="img-blur-mask"></div>
                </div>
                <!-- 4. Á¨¨ÂõõÂº†ÁÖßÁâáÔºöÂæÆ‰ø°ÂõæÁâá_2025-08-07_084800_991.png -->
                <div class="media-item" data-img="ÂæÆ‰ø°ÂõæÁâá_2025-08-07_084800_991.png" style="background-image: url('ÂæÆ‰ø°ÂõæÁâá_2025-08-07_084800_991.png'); position:relative; order:4;" onclick="showImageModal('ÂæÆ‰ø°ÂõæÁâá_2025-08-07_084800_991.png')">
                    <div class="img-blur-mask"></div>
                </div>
            <!-- Â¶ÇÈúÄË∞ÉÊï¥È°∫Â∫èËØ∑ÂêåÊ≠•‰øÆÊîπorderÂ±ûÊÄßÂíåÊ≥®Èáä -->
            </div>
            <div style="margin-top:1rem;">
                <button class="interactive-btn" onclick="showAlert('Â¶ÇÈúÄÊ∑ªÂä†Êñ∞ÁÖßÁâáËØ∑ËÅîÁ≥ªÂºÄÂèëËÄÖ~')">Ê∑ªÂä†Êñ∞ÁÖßÁâá</button>
            </div>
        </div>

        <!-- ÊØèÊó•‰∏ÄÂè•‰∫íÂä®Á•ùÁ¶èÂå∫Âùó -->
        <div class="memory-counter" style="background: #f6fff9; color: #6bd5ff; margin-bottom:2rem;">
            <h2 style="color:#6bd5ff;">ÊØèÊó•‰∏ÄÂè•</h2>
            <div id="daily-quote" style="font-size:1.2rem; margin:1rem 0;">Âä†ËΩΩ‰∏≠...</div>
            <button class="interactive-btn" onclick="showRandomQuote()">Êç¢‰∏ÄÂè•</button>
        </div>
    <!-- ÂõæÁâáÂ§ßÂõæÂºπÁ™ó -->
    <div id="image-modal" style="display:none;position:fixed;z-index:99999;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.8);justify-content:center;align-items:center;">
        <img id="modal-img" src="" style="max-width:90vw;max-height:80vh;border-radius:12px;box-shadow:0 8px 32px #0008;">
        <button onclick="closeImageModal()" style="position:absolute;top:30px;right:40px;font-size:2rem;background:none;border:none;color:#fff;cursor:pointer;">√ó</button>
    </div>
    <script>
    // Ëá™ÂÆö‰πâÂºπÁ™óÁªÑ‰ª∂Ôºàalert/prompt/confirmÔºâ
    (function(){
      const mask = document.getElementById('custom-dialog-mask');
      const dialog = document.getElementById('custom-dialog');
      const box = document.getElementById('custom-dialog-box');
      const title = document.getElementById('custom-dialog-title');
      const content = document.getElementById('custom-dialog-content');
      const input = document.getElementById('custom-dialog-input');
      const okBtn = document.getElementById('custom-dialog-ok');
      const cancelBtn = document.getElementById('custom-dialog-cancel');
      let cb = null;
      let mode = 'alert';
      function closeDialog(val) {
        mask.style.display = 'none';
        dialog.style.display = 'none';
        input.value = '';
        input.style.display = 'none';
        cancelBtn.style.display = 'none';
        if(cb) cb(val);
        cb = null;
      }
      window.showAlert = function(msg, callback, optTitle) {
        mode = 'alert';
        title.textContent = optTitle || 'ÊèêÁ§∫';
        content.textContent = msg;
        input.style.display = 'none';
        cancelBtn.style.display = 'none';
        mask.style.display = dialog.style.display = 'flex';
        cb = callback;
      };
      window.showConfirm = function(msg, callback, optTitle) {
        mode = 'confirm';
        title.textContent = optTitle || 'ËØ∑Á°ÆËÆ§';
        content.textContent = msg;
        input.style.display = 'none';
        cancelBtn.style.display = 'inline-block';
        mask.style.display = dialog.style.display = 'flex';
        cb = callback;
      };
      window.showPrompt = function(msg, callback, optTitle, defaultVal) {
        mode = 'prompt';
        title.textContent = optTitle || 'ËØ∑ËæìÂÖ•';
        content.textContent = msg;
        input.style.display = 'block';
        input.value = defaultVal || '';
        cancelBtn.style.display = 'inline-block';
        mask.style.display = dialog.style.display = 'flex';
        cb = callback;
        setTimeout(()=>{input.focus();}, 100);
      };
      okBtn.onclick = function() {
        if(mode==='prompt') closeDialog(input.value);
        else if(mode==='confirm') closeDialog(true);
        else closeDialog();
      };
      cancelBtn.onclick = function() {
        if(mode==='prompt') closeDialog(null);
        else if(mode==='confirm') closeDialog(false);
      };
      mask.onclick = function(e) { /* ÁÇπÂáªÈÅÆÁΩ©‰∏çÂÖ≥Èó≠ */ };
      dialog.onclick = function(e) { if(e.target===dialog) closeDialog(); };
      input.onkeydown = function(e) { if(e.key==='Enter') okBtn.click(); };
    })();
    // ËÉåÊôØÂΩ©Ëâ≤Ê∞îÊ≥°Âä®ÂõæÊïàÊûú
    (function() {
        const canvas = document.getElementById('bg-bubbles-canvas');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        let dpr = window.devicePixelRatio || 1;
        let width = window.innerWidth, height = window.innerHeight;
        function resize() {
            dpr = window.devicePixelRatio || 1;
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width * dpr;
            canvas.height = height * dpr;
            canvas.style.width = width + 'px';
            canvas.style.height = height + 'px';
            ctx.setTransform(1,0,0,1,0,0);
            ctx.scale(dpr, dpr);
        }
        window.addEventListener('resize', resize);
        resize();
        // Ê∞îÊ≥°ÂèÇÊï∞
        const colors = ['#ff6b9e', '#6bd5ff', '#ffd56b', '#9e6bff', '#baffc9', '#fff6fa'];
        const bubbles = [];
        const BUBBLE_COUNT = 18;
        for (let i = 0; i < BUBBLE_COUNT; i++) {
            bubbles.push({
                x: Math.random() * width,
                y: Math.random() * height,
                r: 20 + Math.random() * 40,
                color: colors[Math.floor(Math.random()*colors.length)],
                speed: 0.3 + Math.random() * 0.7,
                dx: (Math.random()-0.5)*0.3,
                alpha: 0.15 + Math.random()*0.15
            });
        }
        function draw() {
            ctx.clearRect(0,0,width,height);
            for (const b of bubbles) {
                ctx.save();
                ctx.globalAlpha = b.alpha;
                ctx.beginPath();
                ctx.arc(b.x, b.y, b.r, 0, Math.PI*2);
                ctx.closePath();
                ctx.fillStyle = b.color;
                ctx.shadowColor = b.color;
                ctx.shadowBlur = 16;
                ctx.fill();
                ctx.restore();
                // update
                b.y -= b.speed;
                b.x += b.dx;
                if (b.y + b.r < 0) {
                    b.y = height + b.r;
                    b.x = Math.random() * width;
                }
            }
            requestAnimationFrame(draw);
        }
        draw();
    })();

    // Áõ∏ÂÜåÂõæÁâáÂä†ËΩΩÊ£ÄÊµãÔºåËá™Âä®ÈöêËóèÂä†ËΩΩÂ§±Ë¥•ÁöÑÂõæÁâáÈ°π
    window.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.media-item[data-img]').forEach(function(item) {
            var img = new window.Image();
            img.onload = function() { 
                // ÂõæÁâáÂä†ËΩΩÊàêÂäüÔºåÁßªÈô§Âä†ËΩΩÂ§±Ë¥•ÁöÑÊ†∑Âºè
                item.classList.remove('img-loading-failed');
                console.log('ÂõæÁâáÂä†ËΩΩÊàêÂäü:', item.getAttribute('data-img'));
            };
            img.onerror = function(e) {
                // ÊòæÁ§∫ËØ¶ÁªÜÈîôËØØ‰ø°ÊÅØ
                var src = item.getAttribute('data-img');
                var msg = 'Áõ∏ÂÜåÂõæÁâáÂä†ËΩΩÂ§±Ë¥•Ôºö' + src + '\n\n';
                if (src.startsWith('http')) {
                    msg += 'ÁΩëÁªúÂõæÁâáÂä†ËΩΩÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•Ôºö\n‚Ä¢ ÁΩëÁªúËøûÊé•\n‚Ä¢ ÂõæÁâáÈìæÊé•ÊòØÂê¶ÊúâÊïà\n‚Ä¢ ÂõæÁâáÊúçÂä°Âô®ÊòØÂê¶Ê≠£Â∏∏';
                } else {
                    msg += 'Êú¨Âú∞ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•Ôºö\n‚Ä¢ ÂõæÁâáÊñá‰ª∂ÊòØÂê¶Â≠òÂú®\n‚Ä¢ Êñá‰ª∂ÂêçÂíåË∑ØÂæÑÊòØÂê¶Ê≠£Á°Æ\n‚Ä¢ Êñá‰ª∂Ê†ºÂºèÊòØÂê¶ÊîØÊåÅ';
                }
                msg += '\n\nÂª∫ËÆÆÔºö\n‚Ä¢ Â∞ÜÂõæÁâáÊñá‰ª∂ÊîæÂú®‰∏éHTMLÁõ∏ÂêåÁöÑÁõÆÂΩï‰∏≠\n‚Ä¢ Êàñ‰ΩøÁî®ÂÆåÊï¥ÁöÑÁΩëÁªúÂõæÁâáÈìæÊé•';
                
                showAlert(msg);
                // ÊéßÂà∂Âè∞ËæìÂá∫Êõ¥ËØ¶ÁªÜÁöÑ‰∫ã‰ª∂ÂØπË±°
                console.error('ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•', src, e);
                
                // Ê∑ªÂä†Âä†ËΩΩÂ§±Ë¥•ÁöÑÊ†∑ÂºèÔºåËÄå‰∏çÊòØÁõ¥Êé•ÈöêËóè
                item.classList.add('img-loading-failed');
                item.style.backgroundImage = 'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'300\' height=\'300\'%3E%3Crect width=\'300\' height=\'300\' fill=\'%23f0f0f0\'/%3E%3Ctext x=\'150\' y=\'150\' text-anchor=\'middle\' dy=\'.3em\' fill=\'%23999\' font-size=\'16\'%3EÂõæÁâáÂä†ËΩΩÂ§±Ë¥•%3C/text%3E%3C/svg%3E")';
            };
            img.src = item.getAttribute('data-img');
        });
    });
    // ÁîúËúúÁõ∏ÂÜåÂºπÁ™ó
    function showImageModal(url) {
        document.getElementById('modal-img').src = url;
        document.getElementById('image-modal').style.display = 'flex';
    }
    function closeImageModal() {
        document.getElementById('image-modal').style.display = 'none';
        document.getElementById('modal-img').src = '';
    }
    // ÊØèÊó•‰∏ÄÂè•Á•ùÁ¶è
    const quotes = [
        'ÊÑøÊàë‰ª¨‰∏ÄÁõ¥ÁîúÂà∞ËÄÅÔºåÂ≤ÅÊúàÈùôÂ•Ω„ÄÇ',
        '‰Ω†Á¨ëËµ∑Êù•ÁúüÂÉèÂ§èÂ§©ÁöÑÈ£é„ÄÇ',
        'Âíå‰Ω†Âú®‰∏ÄËµ∑ÔºåÊØè‰∏ÄÂ§©ÈÉΩÂÄºÂæóÁ∫™Âøµ„ÄÇ',
        '‰∏ñÁïåÂæàÂ§ßÔºåÈÅáËßÅ‰Ω†ÂàöÂàöÂ•Ω„ÄÇ',
        '‰Ω†ÊòØÊàëÊúÄÁæéÁöÑÈ£éÊôØ„ÄÇ',
        'Èô™‰Ω†ÁúãÊó•ËêΩÁöÑ‰∫∫ÊØîÊó•ËêΩÊõ¥Ê∏©Êüî„ÄÇ',
        'ÊàëÂñúÊ¨¢‰Ω†ÔºåÂÉèÈ£éËµ∞‰∫ÜÂÖ´ÂçÉÈáåÔºå‰∏çÈóÆÂΩíÊúü„ÄÇ',
        '‰Ω†ÊòØÊàëÂøÉÈáåÁöÑÂ∞èÂ§™Èò≥„ÄÇ',
        'Êúâ‰Ω†Âú®ÔºåËøûÂπ≥Âá°ÁöÑÊó•Â≠êÈÉΩÈó™Èó™ÂèëÂÖâ„ÄÇ',
        '‰ΩôÁîüËØ∑Â§öÊåáÊïô„ÄÇ',
        '‰Ω†ÁöÑÂá∫Áé∞ËÆ©ÊàëÁöÑ‰∏ñÁïåÂèòÂæóÊ∏©ÊüîÂèàÊòé‰∫Æ„ÄÇ',
        'ÊØèÂ§©ÈÜíÊù•Á¨¨‰∏Ä‰ª∂‰∫ãÂ∞±ÊòØÊÉ≥‰Ω†„ÄÇ',
        '‰Ω†ÊòØÊàëÂøÉ‰∏≠Ê∞∏ËøúÁöÑÂÆùËóè„ÄÇ',
        'Êúâ‰Ω†ÁöÑÊó•Â≠êÔºåËøûÁ©∫Ê∞îÈÉΩÊòØÁîúÁöÑ„ÄÇ',
        'ÊÉ≥Âíå‰Ω†‰∏ÄËµ∑ÁúãÈÅçÂõõÂ≠£ÁöÑÈ£éÊôØ„ÄÇ',
        '‰Ω†ÊòØÊàëÊúÄÊ∏©ÊöñÁöÑ‰æùÈù†„ÄÇ',
        'ÈÅáËßÅ‰Ω†ÔºåÊòØÊàëÊúÄÁæéÁöÑÊÑèÂ§ñ„ÄÇ',
        '‰Ω†ÁöÑÁ¨ëÂÆπÊòØÊàëÊØèÂ§©ÁöÑÂä®Âäõ„ÄÇ',
        'Âíå‰Ω†Âú®‰∏ÄËµ∑ÔºåÊó∂Èó¥ÊÄªÊòØËøáÂæóÂ§™Âø´„ÄÇ',
        'ÊÑøÊàë‰ª¨ÁöÑÊïÖ‰∫ãÊ≤°ÊúâÁªìÂ±ÄÔºåÂè™Ââ©Âπ∏Á¶è„ÄÇ'
    ];
    function showRandomQuote() {
        const idx = Math.floor(Math.random() * quotes.length);
        document.getElementById('daily-quote').textContent = quotes[idx];
    }
    // È°µÈù¢Âä†ËΩΩÊó∂Ëá™Âä®ÊòæÁ§∫‰∏ÄÂè•
    window.addEventListener('DOMContentLoaded', function() {
        showRandomQuote();
    });
    // ÊÅãÁà±Âä®ÊÄÅËá™Âä®Âä†ËΩΩÔºàÊîØÊåÅÂõæÁâáÂíåËßÜÈ¢ëÔºâ
    /*
    love-feed.json ÊØèÊù°Âä®ÊÄÅÂèØÂåÖÂê´Ôºö
    {
      "date": "2025-08-08",
      "text": "‰∏ÄËµ∑Áúã‰∫ÜÁîµÂΩ±ÔºåË∂ÖÁ∫ßÂºÄÂøÉÔºÅ",
      "img": "movie.jpg", // ÂèØÈÄâÔºåÂõæÁâáË∑ØÂæÑÊàñURL
      "video": "movie.mp4" // ÂèØÈÄâÔºåËßÜÈ¢ëË∑ØÂæÑÊàñURL
    }
    ÂõæÁâáÂíåËßÜÈ¢ëÂ≠óÊÆµÂùá‰∏∫ÂèØÈÄâÔºåÊîØÊåÅÊú¨Âú∞Êñá‰ª∂ÊàñÁΩëÁªúÈìæÊé•„ÄÇÂõæÁâáÂª∫ËÆÆÊîæÂú®ÂêåÁõÆÂΩïÊàñimgÂ≠êÁõÆÂΩïÔºåËßÜÈ¢ëÂêåÁêÜ„ÄÇ
    */
    (function(){
        const feedList = document.getElementById('love-feed-list');
        const feedLoading = document.getElementById('love-feed-loading');
        fetch('love-feed.json?_t='+Date.now())
        .then(r=>r.ok?r.json():[])
        .then(list=>{
            feedLoading.style.display = 'none';
            if(!Array.isArray(list)||list.length===0){
                feedList.innerHTML = '<span style="color:#bbb;">ÊöÇÊó†Âä®ÊÄÅ</span>';
                return;
            }
            feedList.innerHTML = list.map(item=>{
                let html = `<div style='margin-bottom:0.9em;'><span style='color:#ff6b9e;font-weight:bold;'>${item.date}</span>Ôºö${item.text || ''}`;
                if(item.img){
                    html += `<br><img src='${item.img}' alt='Âä®ÊÄÅÂõæÁâá' style='max-width:90%;margin-top:0.3em;border-radius:8px;box-shadow:0 2px 8px #0001;'>`;
                }
                if(item.video){
                    html += `<br><video src='${item.video}' controls style='max-width:90%;margin-top:0.3em;border-radius:8px;box-shadow:0 2px 8px #0001;'></video>`;
                }
                html += '</div>';
                return html;
            }).join('');
        })
        .catch(()=>{
            feedLoading.textContent = 'Âä®ÊÄÅÂä†ËΩΩÂ§±Ë¥•';
        });
    })();
    </script>
        
        <div class="timeline">
            <!-- ÂàùÈÅáÊ¨°ÂÖÉ -->
            <div class="timeline-item">
                <div class="timeline-date">2025.6</div>
                <div class="timeline-content">
                    <h2 class="timeline-title">üåê ÂàùÈÅáÊ¨°ÂÖÉ</h2>
                    <p class="timeline-text">2025Âπ¥6Êúà7Êó•ÔºåÂëΩËøêÁöÑÈΩøËΩÆÂºÄÂßãËΩ¨Âä®ÔºÅÈÄöËøáÂêåÂ≠¶ÁöÑÂø´ÊâãÂàÜ‰∫´ÔºåÊàëÁ¨¨‰∏ÄÊ¨°ÁúãÂà∞‰∫Ü‰Ω†„ÄÇÈÇ£‰∏ÄÂàªÔºå‰ªø‰ΩõÊï¥‰∏™ÂÆáÂÆôÈÉΩÂú®ÂëäËØâÊàëÔºöËøô‰∏™Â•≥Â≠©ÔºåÂÄºÂæóÊàëÁî®‰∏ÄÁîüÂéªÁèçÊÉú„ÄÇ</p>
                    <div class="timeline-quote">"ËøòËÆ∞ÂæóÂä†‰Ω†Â•ΩÂèãÂêéÁöÑÁ¨¨‰∏ÄÂè•ËØùÂêóÔºü'‰Ω†Â•Ω'‚Äî‚ÄîÂ§ö‰πàÁÆÄÂçïÁöÑ‰∏§‰∏™Â≠óÔºåÂç¥ÊòØÊàë‰∫∫ÁîüÊúÄÁæéÂ•ΩÁöÑÂºÄÂßã„ÄÇÂéüÊú¨Âè™ÊÉ≥ÂÅöÊúãÂèãÔºåË∞ÅÁü•ÈÅì......"</div>
                    <div class="media-grid">
                        <div class="media-item" style="background-image: url('ÂæÆ‰ø°ÂõæÁâá_20250806001442_7.jpg'); position:relative;">
                            <div class="img-blur-mask"></div>
                        </div>
                        <div class="media-item" style="background-image: url('ÂæÆ‰ø°ÂõæÁâá_2025-08-08_101314_565.jpg'); position:relative;">
                            <div class="img-blur-mask"></div>
        <style>
        .img-blur-mask {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            width: 100%; height: 100%;
            /* backdrop-filter: blur(8px); */ /* ÁßªÈô§Ê®°Á≥äÊïàÊûú */
            background: transparent; /* ÁßªÈô§ÂçäÈÄèÊòéÁôΩËâ≤ËÉåÊôØ */
            border-radius: 8px;
            z-index: 2;
            pointer-events: none;
        }
        </style>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Á†¥Â£ÅÊó∂Âàª -->
            <div class="timeline-item">
                <div class="timeline-date">2025.7</div>
                <div class="timeline-content">
                    <h2 class="timeline-title">üí¨ Á†¥Â£ÅÊó∂Âàª</h2>
                    <p class="timeline-text">7ÊúàÁöÑÊüê‰∏™Â§úÊôöÔºåÊàë‰ª¨ËÅäÂà∞ÂæàÊôöÂæàÊôö„ÄÇ‰Ω†Á™ÅÁÑ∂ÊïûÂºÄÂøÉÊââÔºåÂàÜ‰∫´‰∫ÜÂæàÂ§öÂÜÖÂøÉÁöÑÊÉ≥Ê≥ï„ÄÇÈÇ£‰∏ÄÂàªÔºåÊàë‰ªø‰ΩõÁúãÂà∞‰∫Ü‰∏Ä‰∏™Èó™Èó™ÂèëÂÖâÁöÑÁÅµÈ≠Ç‚Äî‚Äî‰Ω†ÁöÑÊ¥ªÊ≥º„ÄÅÁÉ≠ÊÉÖ„ÄÅËÅ™ÊïèÔºåËøòÊúâÈÇ£‰ªΩÁ∫ØÁúüÁöÑÂñÑËâØÔºåÂΩªÂ∫ïÂáª‰∏≠‰∫ÜÊàëÁöÑÂøÉ„ÄÇ</p>
                    <p class="timeline-text">7Êúà29Êó•ÔºåÊàë‰ª¨Á¨¨‰∏ÄÊ¨°ËßÜÈ¢ëÈÄöËØùÔºÅ‰Ω†ÂÆ≥ÁæûÂú∞Áî®ÁâπÊïàÊå°ÁùÄËÑ∏Ôºå‰ΩÜÊàë‰æùÁÑ∂ËÉΩÁúãÂà∞‰Ω†ÈÇ£ÂèåÁ¨ëËµ∑Êù•ÂÉèÊúàÁâô‰∏ÄÊ†∑ÁæéÁöÑÁúºÁùõ„ÄÇÈÇ£‰∏ÄÂàªÔºåÊàëÁü•ÈÅìÊàëÂ∑≤ÁªèÊó†Ê≥ïËá™Êãî‰∫Ü„ÄÇ</p>
                    <button class="interactive-btn" onclick="playOurSong()">Êí≠ÊîæÊàë‰ª¨ÁöÑÊ≠å</button>
                    <button class="interactive-btn" onclick="searchAndPlaySong()">ÂàáÊç¢ÁΩëÊòì‰∫ëÊ≠åÊõ≤</button> <!-- Êñ∞Â¢ûÊåâÈíÆÔºåÁÇπÂáªÂºπÁ™óËæìÂÖ•ÁΩëÊòì‰∫ëID -->
                </div>
            </div>

            <!-- ÂÖ≥Á≥ªÂçáÁ∫ß -->
            <div class="timeline-item">
                <div class="timeline-date">2025.7.20</div>
                <div class="timeline-content">
                    <h2 class="timeline-title">üöÄ ÂÖ≥Á≥ªÂçáÁ∫ß</h2>
                    <p class="timeline-text">2025Âπ¥8Êúà2Êó•ÂáåÊô®5ÁÇπ20ÂàÜÔºåËøô‰∏™ÂÖÖÊª°È≠îÂäõÁöÑÊó∂ÂàªÔºÅÊàëÂú®QQ‰∏äÈºìËµ∑ÂãáÊ∞îÔºåÂêë‰Ω†ÂèëÈÄÅ‰∫ÜÈÇ£Âè•ÊîπÂèòÊàë‰ª¨ÂëΩËøêÁöÑËØù„ÄÇÂΩì‰Ω†ÂõûÂ§ç"ÊàëÂêåÊÑèÔºÅ"ÁöÑÈÇ£‰∏ÄÂàªÔºåÊàëÁöÑ‰∏ñÁïåÁû¨Èó¥Ë¢´Á≤âËâ≤ÁöÑÊ≥°Ê≥°Â°´Êª°Ôºå‰ªø‰ΩõÊï¥‰∏™ÂÆáÂÆôÈÉΩÂú®‰∏∫Êàë‰ª¨Â∫ÜÁ•ùÔºÅ</p>
                    <p class="timeline-text">‰ªéÊ≠§ÔºåÊàë‰ª¨Êúâ‰∫Ü‰∏ìÂ±ûÁöÑÊÉÖ‰æ£Ê†áÂøóÔºöÈÇ£‰∫õÂè™Â±û‰∫éÊàë‰ª¨‰∏§‰∏™‰∫∫ÁöÑ‰∫≤ÊòµÁß∞ÂëºÔºåËøòÊúâÈÇ£ÂØπË±°ÂæÅÁùÄÂΩºÊ≠§ËÉåÊôØÁöÑÁîúËúúÂ§¥ÂÉè„ÄÇÊØè‰∏Ä‰∏™ÁªÜËäÇÈÉΩÂú®ËØâËØ¥ÁùÄÊàë‰ª¨ÁöÑ‰∏ìÂ±ûÊïÖ‰∫ã„ÄÇ</p>
                    <div class="media-grid">
                        <div class="media-item" style="background-image: url('ÂæÆ‰ø°ÂõæÁâá_2025-08-05_232113_934.jpg')"></div>
                    </div>
                </div>
            </div>
            
            <!-- ‰∫ëÁ´ØÁîúËúúÊ∏ÖÂçï -->
            <div class="timeline-item">
                <div class="timeline-date">2025.8</div>
                <div class="timeline-content">
                    <h2 class="timeline-title">üíª ‰∫ëÁ´ØÁîúËúúÊ∏ÖÂçï</h2>
                    <p class="timeline-text">Êàë‰ª¨‰∏ÄËµ∑ÂÆåÊàêÁöÑ‰∫ãÔºö</p>
                    <ul class="timeline-list">
                        <li>Thinking~</li>
                        <li>Thinking~</li>
                        <li>Thinking~</li>
                    </ul>
                    <p class="timeline-text">‰∫íÁõ∏ÈÄÅËøáÁöÑËôöÊãüÁ§ºÁâ©Ôºö</p>
                    <ul class="timeline-list">
                        <li>Thinking~</li>
                        <li>Thinking~</li>
                    </ul>
                    <button class="interactive-btn" onclick="showLoveCalculator()">ÊµãËØïÊàë‰ª¨ÁöÑÂåπÈÖçÂ∫¶</button>
                </div>
            </div>
            
            <!-- Êú™Êù•‰ø°Âè∑Â°î -->
            <div class="timeline-item">
                <div class="timeline-date">Êú™Êù•</div>
                <div class="timeline-content">
                    <h2 class="timeline-title">üì° Êú™Êù•‰ø°Âè∑Â°î</h2>
                    <p class="timeline-text">Êàë‰ª¨ËÆ°ÂàíÂú®......Á¨¨‰∏ÄÊ¨°ËßÅÈù¢ÔºåÂú∞ÁÇπÂÆöÂú®......</p>
                    <p class="timeline-text">ÈïøËøúÁöÑÊ¢¶ÊÉ≥Ôºö</p>
                    <ul class="timeline-list">
                        <li>Thinking~</li>
                        <li>Thinking~</li>
                        <li>Thinking~</li>
                    </ul>
                    <div id="countdown" style="margin-top: 1rem;"></div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>Áî®‰ª£Á†ÅÁºñÁªáÁöÑÁà±ÊÑè | ÊúÄÂêéÊõ¥Êñ∞‰∫é <span id="update-date"></span></p>
        <p>ÂºÄÂèëËÄÖwechatÔºözly_137,QQ:2369157249(Ê≥®ÊòéÊù•ÊÑèÔºÅ)</p>
        <button class="interactive-btn" style="margin-top:1rem;background:#fff6fa;color:#ff6b9e;border:1px solid #ffb6d5;" onclick="showWhisperInput()">ÂÜô‰∏ÄÂè•ÊÇÑÊÇÑËØù</button>
        <button class="interactive-btn" style="margin-top:1rem;background:#f6fff9;color:#6bd5ff;border:1px solid #b6eaff;" onclick="showConfessionWall()">Ë°®ÁôΩÂ¢ô</button>
    </footer>

    <!-- ÊÇÑÊÇÑËØùÂºπÂπïÂÆπÂô® -->
    <div id="whisper-barrage-container" style="position:fixed;left:0;bottom:40px;width:100vw;z-index:99998;pointer-events:none;"></div>

    <script>
    // È°µÈù¢ÁÇπÂáªÈöèÊú∫È£òËêΩÁà±ÂøÉÂä®Áîª
    document.addEventListener('click', function(e) {
        // Âè™Âú®‰∏ªÂå∫ÂüüÁÇπÂáªÊâçËß¶Âèë
        if (e.target.closest('button,.media-item,#image-modal')) return;
        const heart = document.createElement('div');
        heart.textContent = 'üíñ';
        heart.style.position = 'fixed';
        heart.style.left = e.clientX - 16 + 'px';
        heart.style.top = e.clientY - 16 + 'px';
        heart.style.fontSize = (24 + Math.random()*16) + 'px';
        heart.style.opacity = 0.85;
        heart.style.pointerEvents = 'none';
        heart.style.transition = 'transform 1.2s cubic-bezier(.2,1.2,.4,1), opacity 1.2s';
        heart.style.transform = 'translateY(0) scale(1)';
        document.body.appendChild(heart);
        setTimeout(()=>{
            heart.style.transform = `translateY(-120px) scale(${1.2+Math.random()*0.6})`;
            heart.style.opacity = 0;
        }, 10);
        setTimeout(()=>heart.remove(), 1300);
    });

// Âπ∏ËøêÁ≠æÂäüËÉΩ
function showLuckyNote() {
    const notes = [
        '‰Ω†‰ª¨ÁöÑÁà±ÊÉÖ‰ºöÂÉè‰ªäÂ§©ÁöÑÈò≥ÂÖâ‰∏ÄÊ†∑Ê∏©ÊöñÊòé‰∫Æ~',
        'Êú™Êù•ÁöÑÊØè‰∏ÄÂ§©ÈÉΩÂÄºÂæóÊúüÂæÖÔºåÁîúËúú‰ºö‰∏ÄÁõ¥Âª∂Áª≠ÔºÅ',
        '‰Ω†‰ª¨ÁöÑÊïÖ‰∫ã‰ºöÊØîÁ´•ËØùÊõ¥ÁæéÂ•Ω~',
        'Âπ∏Á¶èÂ∞±Âú®Ë∫´ËæπÔºåÁèçÊÉúÊØè‰∏ÄÊ¨°ÂøÉÂä®~',
        'ÊÑø‰Ω†‰ª¨ÁöÑÊÑüÊÉÖÂÉèÂπ∏ËøêÁ≠æ‰∏ÄÊ†∑ÔºåÊäΩÂà∞ÁöÑÈÉΩÊòØÂ•ΩÊ∂àÊÅØÔºÅ',
        '‰ªäÂ§©‰ºöÊúâÂ∞èÊÉäÂñúÈôç‰∏¥Âì¶ÔºÅ',
        '‰Ω†‰ª¨ÁöÑÈªòÂ•ëÂÄºÂ∑≤Êª°ÂàÜÔºÅ',
        'Áà±ÊÑèÂ¶ÇÂàùÔºåÁîúËúúÂ¶ÇÊïÖ„ÄÇ',
        '‰Ω†‰ª¨ÁöÑÊú™Êù•‰ºöÂæàÈó™ËÄÄÔºÅ',
        'ÊÑø‰Ω†‰ª¨ÁöÑÊØè‰∏ÄÂ§©ÈÉΩË¢´Áà±ÂåÖÂõ¥~'
    ];
        const idx = Math.floor(Math.random() * notes.length);
        showAlert('üéÅ Âπ∏ËøêÁ≠æÔºö\n' + notes[idx]);
}

// Ë°®ÁôΩÂ¢ôÂºπÂπïÂäüËÉΩ
function showConfessionWall() {
    showPrompt('Âú®Ë°®ÁôΩÂ¢ôÂÜô‰∏ã‰Ω†ÁöÑÂøÉÈáåËØùÔºà‰ºö‰ª•ÂºπÂπïÂΩ¢ÂºèÈ£òËøáÈ°µÈù¢È°∂ÈÉ®ÔºâÔºö', function(confession) {
        if (confession && confession.trim()) {
            addConfessionBarrage(confession.trim());
        }
    });
}
function addConfessionBarrage(text) {
    let container = document.getElementById('confession-barrage-container');
    if (!container) {
        container = document.createElement('div');
        container.id = 'confession-barrage-container';
        container.style.position = 'fixed';
        container.style.left = '0';
        container.style.top = '20px';
        container.style.width = '100vw';
        container.style.zIndex = '99999';
        container.style.pointerEvents = 'none';
        document.body.appendChild(container);
    }
    const span = document.createElement('span');
    span.textContent = text;
    span.style.position = 'absolute';
    span.style.left = '100vw';
    span.style.top = (Math.random()*20) + 'px';
    span.style.whiteSpace = 'nowrap';
    span.style.fontSize = (18+Math.random()*8)+'px';
    span.style.color = ['#ff6b9e','#6bd5ff','#ffd56b','#9e6bff','#baffc9'][Math.floor(Math.random()*5)];
    span.style.background = 'rgba(255,255,255,0.85)';
    span.style.borderRadius = '16px';
    span.style.padding = '4px 16px';
    span.style.marginRight = '8px';
    span.style.boxShadow = '0 2px 8px #0001';
    span.style.opacity = 0.98;
    span.style.pointerEvents = 'none';
    const duration = 8 + Math.random()*3;
    span.style.transition = `transform ${duration}s linear`;
    container.appendChild(span);
    setTimeout(()=>{
        span.style.transform = `translateX(-110vw)`;
    }, 30);
    setTimeout(()=>span.remove(), duration*1000+1000);
}

// ÊÉÖ‰æ£ÈªòÂ•ëÈóÆÁ≠îÂäüËÉΩ
function showLoveQuiz() {
    const quizList = [
        {
            q: 'Á¨¨‰∏ÄÊ¨°ËßÅÈù¢‰Ω†‰ª¨ÊúÄÊÉ≥ÂÅö‰ªÄ‰πàÔºü',
            a: ['A. Êã•Êä±', 'B. ÂêÉÂ•ΩÂêÉÁöÑ', 'C. ÁúãÁîµÂΩ±', 'D. ‰∏ÄËµ∑Êï£Ê≠•']
        },
        {
            q: '‰Ω†ËßâÂæóÂØπÊñπÊúÄÂèØÁà±ÁöÑÂú∞ÊñπÊòØÔºü',
            a: ['A. Á¨ëÂÆπ', 'B. Â£∞Èü≥', 'C. ÊÄßÊ†º', 'D. ÁúºÁùõ']
        },
        {
            q: '‰Ω†‰ª¨ÊúÄÊÉ≥‰∏ÄËµ∑ÂéªÁöÑÂú∞ÊñπÔºü',
            a: ['A. Êµ∑Ëæπ', 'B. Ê∏∏‰πêÂõ≠', 'C. Â±±È°∂', 'D. ÂÆ∂Èáå']
        },
        {
            q: 'Ë∞ÅÊõ¥ÂÆπÊòìÂÖàËÆ§ÈîôÔºü',
            a: ['A. Êàë', 'B. ÂØπÊñπ', 'C. ÁúãÊÉÖÂÜµ', 'D. ÈÉΩ‰∏çËÆ§Èîô']
        },
        {
            q: '‰Ω†‰ª¨ÁöÑÁà±ÊÉÖ‰∏ªÈ¢òËâ≤ÊòØÔºü',
            a: ['A. Á≤âËâ≤', 'B. ËìùËâ≤', 'C. ÈªÑËâ≤', 'D. Á¥´Ëâ≤']
        },
        {
            q: '‰Ω†‰ª¨Á¨¨‰∏ÄÊ¨°Á∫¶‰ºöÊúÄÈöæÂøòÁöÑÁû¨Èó¥ÊòØÔºü',
            a: ['A. ÁâµÊâã', 'B. ÊãçÁÖß', 'C. ÂêÉÁæéÈ£ü', 'D. ÁúãÁîµÂΩ±']
        },
        {
            q: 'ÂØπÊñπÊúÄÂñúÊ¨¢ÁöÑÈ•ÆÊñôÊòØÔºü',
            a: ['A. Â•∂Ëå∂', 'B. ÂíñÂï°', 'C. ÊûúÊ±Å', 'D. Á¢≥ÈÖ∏È•ÆÊñô']
        },
        {
            q: '‰Ω†‰ª¨ÊúÄÂ∏∏Áî®ÁöÑÊÉÖ‰æ£ÊòµÁß∞ÊòØÔºü',
            a: ['A. ÂÆùÂÆù', 'B. ‰∫≤Áà±ÁöÑ', 'C. Â∞èÁå™', 'D. Áã¨ÂÆ∂ÊòµÁß∞']
        },
        {
            q: 'Ë∞ÅÊõ¥Áà±ÂêÉÈõ∂È£üÔºü',
            a: ['A. Êàë', 'B. ÂØπÊñπ', 'C. ÈÉΩÁà±', 'D. ÈÉΩ‰∏çÁà±']
        },
        {
            q: '‰Ω†‰ª¨ÊúÄÊÉ≥‰∏ÄËµ∑ÂÆåÊàêÁöÑÊÑøÊúõÊòØÔºü',
            a: ['A. ‰∏ÄËµ∑ÊóÖË°å', 'B. ÊãçÊÉÖ‰æ£ÂÜôÁúü', 'C. ÂÖªÂÆ†Áâ©', 'D. ÂÖ±Âêå‰π∞Êàø']
        },
        {
            q: 'ÂØπÊñπÊúÄÊÄïÁöÑ‰∏úË•øÊòØÔºü',
            a: ['A. ÊòÜËô´', 'B. ÈªëÊöó', 'C. È´òÁ©∫', 'D. Áã¨Â§Ñ']
        },
        {
            q: '‰Ω†‰ª¨ÊúÄÂñúÊ¨¢‰∏ÄËµ∑ÂÅöÁöÑ‰∫ãÊÉÖÔºü',
            a: ['A. ÁúãÁîµÂΩ±', 'B. Êï£Ê≠•', 'C. ÂÅöÈ•≠', 'D. ÊâìÊ∏∏Êàè']
        },
        {
            q: 'Ë∞ÅÊõ¥ÂñúÊ¨¢ÊííÂ®áÔºü',
            a: ['A. Êàë', 'B. ÂØπÊñπ', 'C. ÈÉΩ‰ºö', 'D. ÈÉΩ‰∏çÊííÂ®á']
        },
        {
            q: '‰Ω†‰ª¨ÁöÑ‰∏ìÂ±ûÁ∫™ÂøµÊó•ÊòØÂì™‰∏ÄÂ§©Ôºü',
            a: ['A. Á¨¨‰∏ÄÊ¨°ËßÅÈù¢', 'B. Ë°®ÁôΩÊó•', 'C. ÁâµÊâãÊó•', 'D. ÂÖ∂ÂÆÉ']
        },
        {
            q: 'ÂØπÊñπÊúÄÂñúÊ¨¢ÁöÑÂ≠£ËäÇÊòØÔºü',
            a: ['A. Êò•Â§©', 'B. Â§èÂ§©', 'C. ÁßãÂ§©', 'D. ÂÜ¨Â§©']
        },
        {
            q: '‰Ω†‰ª¨ÊúÄÂ∏∏‰∏ÄËµ∑ÁÇπÁöÑÂ§ñÂçñÊòØ‰ªÄ‰πàÔºü',
            a: ['A. ÁÅ´ÈîÖ', 'B. ÁÉßÁÉ§', 'C. Â•∂Ëå∂ÁîúÂìÅ', 'D. Âø´È§ê']
        }
    ];
    const idx = Math.floor(Math.random() * quizList.length);
    const quiz = quizList[idx];
    showPrompt('ÊÉÖ‰æ£ÈªòÂ•ëÈóÆÁ≠îÔºö\n' + quiz.q + '\n' + quiz.a.join('  '), function(answer) {
        if (answer) {
            showAlert('Á≠îÊ°àÂ∑≤ËÆ∞ÂΩïÔºÅÂø´ÂíåTAÂØπÁ≠îÊ°àÂêß~\n‰Ω†ÈÄâÁöÑÊòØÔºö' + answer);
        }
    });
}

    // ÊÇÑÊÇÑËØùÂºπÂπïÂäüËÉΩ
function showWhisperInput() {
    showPrompt('ËØ∑ËæìÂÖ•ÊÇÑÊÇÑËØùÊùÉÈôêÂØÜÁ†ÅÔºö', function(pwd) {
        if (pwd !== 'zlyloveyzl') {
            if (pwd !== null) showAlert('ÂØÜÁ†ÅÈîôËØØÔºåÊó†ÊùÉÈôêËæìÂÖ•ÊÇÑÊÇÑËØùÔºÅ');
            return;
        }
        showPrompt('ÂÜô‰∏ÄÂè•ÊÇÑÊÇÑËØùÔºà‰ºö‰ª•ÂºπÂπïÂΩ¢ÂºèÈ£òËøáÈ°µÈù¢Â∫ïÈÉ®ÔºâÔºö', function(msg) {
            if (msg && msg.trim()) {
                // ÊïèÊÑüËØçÂàóË°®ÔºåÂèØÊ†πÊçÆÈúÄË¶ÅÊâ©Â±ï
                const badWords = [
                    'ÂÇªÈÄº','sb','Â¶àÁöÑ','Êìç','fuck','shit','Ëçâ','Áãó','Ê≠ª','Êªö','Ë¥±','bitch','cnm','mlgb','ÁÖûÁ¨î','‰Ω†Â¶à','‰ªñÂ¶à','Êó•‰Ω†','Â±å','È∏°Â∑¥','Èò¥ÈÅì','Èò≥Áóø','È´òÊΩÆ','ËÇè','Â©äÂ≠ê','ÊùÇÁßç','ÁïúÁîü','ÁéãÂÖ´','‰∫åÈÄº','Âº±Êô∫','Êô∫Èöú','ËÑëÊÆã','ÁôΩÁó¥','Â∫üÁâ©','ÂûÉÂúæ','ÂèòÊÄÅ','Ê∑´','Ëâ≤È¨º','Â∞è‰∏â','Â∞èË¥±','Ë¥±‰∫∫','Áãó‰∏úË•ø','ÁãóÂ±é','ÁãóÊó•','ÁãóÂ®òÂÖªÁöÑ','Áå™','Ë†¢','sb','tmd','nm','nmsl','nt','nmh','nmgb','nmzb','nmmp','nmll','nmzl','nmzj','nmzz','nmml','nmb','nmw','nmgd','nmgg','nmgn','nmgs','nmgl','nmga','nmge','nmgr','nmgt','nmgy','nmgh','nmgi','nmgo','nmgu','nmgi','nmga','nmgb','nmgsb','nmgnb','nmglb','nmglg','nmgls','nmglw','nmglz','nmglx','nmglc','nmglv','nmglf','nmglp','nmglq','nmglr','nmglj','nmglk','nmglh','nmglm','nmglb','nmglg','nmgls','nmglw','nmglz','nmglx','nmglc','nmglv','nmglf','nmglp','nmglq','nmglr','nmglj','nmglk','nmglh','nmglm','nmglb','nmglg','nmgls','nmglw','nmglz','nmglx','nmglc','nmglv','nmglf','nmglp','nmglq','nmglr','nmglj','nmglk','nmglh','nmglm','sÈÄº','Ë†¢Áå™'
                ];
                const lowerMsg = msg.trim().toLowerCase();
                let hasBad = false;
                for (let i = 0; i < badWords.length; i++) {
                    if (lowerMsg.includes(badWords[i])) {
                        hasBad = true;
                        break;
                    }
                }
                if (hasBad) {
                    showAlert('ÂÜÖÂÆπÂåÖÂê´‰∏çÊñáÊòéÁî®ËØ≠ÔºåËØ∑ÈáçÊñ∞ËæìÂÖ•~');
                    return;
                }
                addWhisperBarrage(msg.trim());
            }
        });
    });
}
    function addWhisperBarrage(text) {
        const container = document.getElementById('whisper-barrage-container');
        const span = document.createElement('span');
        span.textContent = text;
        span.style.position = 'absolute';
        span.style.left = '100vw';
        span.style.bottom = (Math.random()*20) + 'px';
        span.style.whiteSpace = 'nowrap';
        span.style.fontSize = (18+Math.random()*8)+'px';
        span.style.color = ['#ff6b9e','#6bd5ff','#ffd56b','#9e6bff','#baffc9'][Math.floor(Math.random()*5)];
        span.style.background = 'rgba(255,255,255,0.7)';
        span.style.borderRadius = '16px';
        span.style.padding = '4px 16px';
        span.style.marginRight = '8px';
        span.style.boxShadow = '0 2px 8px #0001';
        span.style.opacity = 0.95;
        span.style.pointerEvents = 'none';
        const duration = 7 + Math.random()*3;
        span.style.transition = `transform ${duration}s linear`;
        container.appendChild(span);
        // Âä®Áîª
        setTimeout(()=>{
            span.style.transform = `translateX(-110vw)`;
        }, 30);
        setTimeout(()=>span.remove(), duration*1000+1000);
    }
        // ÈÖçÁΩÆÈ°π - ‰∏™ÊÄßÂåñÁΩëÈ°µ
        const CONFIG = {
            startDate: '2025-08-02T05:20:00', // ÂÖ≥Á≥ªÁ°ÆÁ´ãÊó•Êúü
            names: {
                me: 'Âº†xx',
                you: 'Âñªxx'
            },
            anniversaries: [
                { days: 7, title: "üéâ ÊÅãÁà±‰∏ÄÂë®Á∫™Âøµ", message: "ÁîúËúúÁöÑÁ¨¨‰∏ÄÂë®Âè™ÊòØÂºÄÂßãÂì¶~" },
                { days: 30, title: "üåô Êª°ÊúàÂø´‰πê", message: "‰∏Ä‰∏™ÊúàÁöÑÁ≥ñÂàÜË∂ÖÊ†áË≠¶ÂëäÔºÅ" },
                { days: 100, title: "üíØ ÁôæÊó•ÊàêÂ∞±", message: "100Â§©Âè™ÊòØÊàë‰ª¨ÊïÖ‰∫ãÁöÑÂ∫èÁ´†" },
                { days: 365, title: "üå∏ Âë®Âπ¥Á∫™Âøµ", message: "‰∏ÄÂπ¥ÂõõÂ≠£ÔºåÊúÄÁà±Êúâ‰Ω†" },
                { days: 520, title: "üíñ 520ÊàëÁà±‰Ω†", message: "Ëøô‰∏™Êó•Â≠êÂ§©ÁîüÂ±û‰∫éÊàë‰ª¨" }
            ],
            ourSong: 'https://music.163.com/song/media/outer/url?id=568389828.mp3' // ÊõøÊç¢‰∏∫‰Ω†‰ª¨ÁöÑÊ≠åÔºåÂè™ÊîπmusicIDÈÉ®ÂàÜ
        };
        
        // ÂàùÂßãÂåñÈ°µÈù¢ÂÜÖÂÆπ
        function initPage() {
            document.title = `Êàë‰ª¨ÁöÑ‰∫ëÁ´ØÊÅãÁà±Êó•ËÆ∞ | ${CONFIG.names.me} & ${CONFIG.names.you}`;
            document.querySelector('h1').textContent = 'Êàë‰ª¨ÁöÑ‰∫ëÁ´ØÊÅãÁà±Êó•ËÆ∞';
            document.querySelector('.subtitle').innerHTML = 
                `${CONFIG.names.me} ‚ù§Ô∏è ${CONFIG.names.you} | Âßã‰∫é <span id="start-date">${formatDate(new Date(CONFIG.startDate))}</span>`;
        }
        
        // ÊºÇÊµÆÁà±ÂøÉÊïàÊûú
        function createHearts() {
            const container = document.getElementById('hearts-container');
            const colors = ['#ff6b9e', '#6bd5ff', '#ffd56b', '#9e6bff'];
            
            for (let i = 0; i < 20; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = '‚ù§Ô∏è';
                heart.style.left = Math.random() * 100 + '%';
                heart.style.top = Math.random() * 100 + '%';
                heart.style.color = colors[Math.floor(Math.random() * colors.length)];
                heart.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(heart);
            }
        }
        
        // Êõ¥Êñ∞ÂÆûÊó∂Êó∂Èó¥
        function updateCurrentTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = 
                `ÂΩìÂâçÊó∂Èó¥: ${now.getFullYear()}Âπ¥${now.getMonth()+1}Êúà${now.getDate()}Êó• ` + 
                `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
        }
        
        // Á≤æÁ°ÆËÆ°Êó∂Âíå100Â§©Á∫™ÂøµÊó•ÂÄíËÆ°Êó∂
        function updateTimeTogether() {
            const startDate = new Date(CONFIG.startDate);
            const now = new Date();
            const diff = now - startDate;
            // ËÆ°ÁÆóÊó∂Èó¥Â∑Æ
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            // Êõ¥Êñ∞Êó∂Èó¥ÊòæÁ§∫
            document.getElementById('days-together').innerHTML = 
                `${days}Â§©<span class="small">${hours}Â∞èÊó∂${minutes}ÂàÜ${seconds}Áßí</span>`;
            // Âè™ÊòæÁ§∫100Â§©Á∫™ÂøµÊó•ÂÄíËÆ°Êó∂
            const daysLeft = 100 - days;
            document.getElementById('next-anniversary').textContent = 
                daysLeft > 0 ? `Ë∑ùÁ¶ª100Â§©Á∫™ÂøµÊó•ËøòÊúâ${daysLeft}Â§©` : `Â∑≤ÁªèË∂ÖËøá100Â§©Á∫™ÂøµÊó•${-daysLeft}Â§©Âï¶ÔºÅ`;
            // Êõ¥Êñ∞ÂÄíËÆ°Êó∂
            updateCountdown();
        }
        
        // Êõ¥Êñ∞ËßÅÈù¢ÂÄíËÆ°Êó∂
        function updateCountdown() {
            const meetDate = new Date('2026-08-02T00:00:00'); // ‰øÆÊîπ‰∏∫‰Ω†‰ª¨ÁöÑËßÅÈù¢Êó•Êúü
            const now = new Date();
            const diff = meetDate - now;
            
            if (diff > 0) {
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                
                document.getElementById('countdown').innerHTML = 
                    `<p>Ë∑ùÁ¶ªËßÅÈù¢ËøòÊúâ: <strong>${days}Â§©${hours}Â∞èÊó∂${minutes}ÂàÜ</strong></p>`;
            } else {
                document.getElementById('countdown').innerHTML = 
                    `<p>Êàë‰ª¨Â∑≤ÁªèËßÅÈù¢Âï¶ÔºÅüéâ ‰∏ãÊ¨°ËßÅÈù¢ÂÄíËÆ°Êó∂ÂèØ‰ª•‰øÆÊîπ‰ª£Á†ÅËÆæÁΩÆ~</p>`;
            }
        }
        
        // Á∫™ÂøµÊó•ÂΩ©Ëõã
        function checkAnniversary(days) {
            const anniversary = CONFIG.anniversaries.find(a => a.days === days);
            if (anniversary && !localStorage.getItem(`anniversary-${days}`)) {
                showAnniversaryPopup(anniversary);
                localStorage.setItem(`anniversary-${days}`, 'shown');
            }
        }
        
        // ÊòæÁ§∫Á∫™ÂøµÊó•ÂºπÁ™ó
        function showAnniversaryPopup(anniversary) {
            const popup = document.createElement('div');
            popup.className = 'anniversary-popup';
            popup.innerHTML = `
                <div class="anniversary-content">
                    <button class="close-btn" onclick="this.parentNode.parentNode.remove()">√ó</button>
                    <h2 style="color: var(--primary);">${anniversary.title}</h2>
                    <p style="font-size: 1.2rem;">${anniversary.message}</p>
                    <img src="https://via.placeholder.com/300x200?text=Êàë‰ª¨ÁöÑ${anniversary.days}Â§©" 
                         style="max-width: 100%; border-radius: 10px; margin: 1rem 0;">
                    <p>ËøôÊòØÊàë‰ª¨Áà±ÁöÑÁ¨¨ ${anniversary.days} Â§©</p>
                    <button onclick="this.parentNode.parentNode.remove()" style="
                        padding: 10px 20px;
                        background: var(--primary);
                        color: white;
                        border: none;
                        border-radius: 20px;
                        margin-top: 1rem;
                        cursor: pointer;
                    ">ÁªßÁª≠‰π¶ÂÜôÊàë‰ª¨ÁöÑÊïÖ‰∫ã</button>
                </div>
            `;
            
            document.body.appendChild(popup);
        }
        
        // ÊòæÁ§∫Êõ¥Êñ∞Êó•Êúü
        function showUpdateDate() {
            document.getElementById('update-date').textContent = formatDate(new Date());
        }
        
        // Ê†ºÂºèÂåñÊó•Êúü
        function formatDate(date) {
            return `${date.getFullYear()}Âπ¥${date.getMonth()+1}Êúà${date.getDate()}Êó•`;
        }
        
        // Êí≠Êîæ/ÊöÇÂÅúÊàë‰ª¨ÁöÑÊ≠åÔºåÂπ∂ÊîØÊåÅÂàáÊç¢ÁΩëÊòì‰∫ëÈü≥‰πêID
        // ‰øùÊåÅÈü≥È¢ëÂØπË±°ÂÖ®Â±ÄÂîØ‰∏ÄÔºåÈÅøÂÖçÂ§öÊ¨°Êí≠ÊîæÈáçÂè†
        let ourSongAudio = null;
        function playOurSong() {
            if (!ourSongAudio) {
                ourSongAudio = new Audio(CONFIG.ourSong);
                ourSongAudio.loop = false; // Â¶ÇÈúÄÂæ™ÁéØÊí≠ÊîæÂèØËÆæ‰∏∫true
                // ÁõëÂê¨Êí≠ÊîæÂ§±Ë¥•
                ourSongAudio.onerror = function() {
                    alert('Êó†Ê≥ïÊí≠ÊîæÈü≥‰πêÔºåÂèØËÉΩËØ•IDÊó†ÁâàÊùÉÊàñË¢´‰∏ãÊû∂ÔºåÂ∞ÜÊÅ¢Â§çÈªòËÆ§Ê≠åÊõ≤');
                    // ÊÅ¢Â§çÈªòËÆ§Ê≠åÊõ≤
                    CONFIG.ourSong = 'https://music.163.com/song/media/outer/url?id=568389828.mp3';
                    ourSongAudio = null;
                };
            }
            if (ourSongAudio.paused) {
                ourSongAudio.play().catch(e => alert('Êó†Ê≥ïËá™Âä®Êí≠ÊîæÔºåËØ∑ÁÇπÂáªÈ°µÈù¢‰ªªÊÑèÂ§ÑÂêéÈáçËØï'));
            } else {
                ourSongAudio.pause();
            }
        }
        // ÁΩëÊòì‰∫ëÈü≥‰πêIDÂàáÊç¢ÂäüËÉΩÔºàÈúÄÂØÜÁ†ÅÔºâ
        function searchAndPlaySong() {
            showPrompt('ËØ∑ËæìÂÖ•Êõ¥Êç¢Ê≠åÊõ≤ÁöÑÊùÉÈôêÂØÜÁ†ÅÔºö', function(pwd) {
                if (pwd !== 'zlyloveyzl') {
                    if (pwd !== null) showAlert('ÂØÜÁ†ÅÈîôËØØÔºåÊó†ÊùÉÈôêÊõ¥Êç¢Ê≠åÊõ≤ÔºÅ');
                    return;
                }
                showPrompt('ËØ∑ËæìÂÖ•ÁΩëÊòì‰∫ëÈü≥‰πêÁöÑÊ≠åÊõ≤IDÔºàÊï∞Â≠óÔºåÂ¶Ç568389828ÔºâÔºö', function(musicId) {
                    if (musicId && /^\d+$/.test(musicId)) {
                        const url = `https://music.163.com/song/media/outer/url?id=${musicId}.mp3`;
                        CONFIG.ourSong = url; // Êõ¥Êñ∞ÈÖçÁΩÆ
                        if (ourSongAudio) {
                            ourSongAudio.pause();
                            ourSongAudio = null; // ÈáäÊîæÊóßÂØπË±°
                        }
                        playOurSong(); // Êí≠ÊîæÊñ∞Ê≠å
                    } else if (musicId) {
                        showAlert('ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑÁΩëÊòì‰∫ëÈü≥‰πêIDÔºàÁ∫ØÊï∞Â≠óÔºâ');
                    }
                });
            });
        }
        // Â¶ÇÈúÄÂçïÁã¨ÊöÇÂÅúÊåâÈíÆÔºåÂèØË∞ÉÁî® playOurSong() ÊàñËá™ÂÆö‰πâ
        
        // ÊòæÁ§∫ËÆ∞ÂøÜÊ∑ªÂä†Ê°Ü
        function showMemoryPrompt() {
            showPrompt('Ê∑ªÂä†Êñ∞ÁöÑÁæéÂ•ΩÂõûÂøÜ:\n(Ê†ºÂºè: Êó•Êúü|Ê†áÈ¢ò|ÂÜÖÂÆπ)\n‰æãÂ¶Ç: 2025-08-01|Á¨¨‰∏ÄÊ¨°ËßÜÈ¢ëÈÄöËØù|ËÅä‰∫ÜÊï¥Êï¥‰∏âÂ∞èÊó∂', function(memory) {
                if (memory) {
                    showAlert('ÂõûÂøÜÂ∑≤Ê∑ªÂä†! (ÂÆûÈôÖÂäüËÉΩÈúÄË¶ÅÂêéÁ´ØÊîØÊåÅ‰øùÂ≠ò)');
                }
            });
        }
        
        // ÊòæÁ§∫Áà±ÊÉÖËÆ°ÁÆóÂô®
        function showLoveCalculator() {
            const lovePercent = Math.floor(Math.random() * 31) + 70; // 70-100%
            alert(`‚ù§Ô∏è ‰Ω†‰ª¨ÁöÑÂåπÈÖçÂ∫¶ÊòØ: ${lovePercent}% ‚ù§Ô∏è\n\n${CONFIG.names.me} Âíå ${CONFIG.names.you} ÊòØÂ§©ÈÄ†Âú∞ËÆæÁöÑ‰∏ÄÂØπÔºÅ`);
        }
        
        // ÂàùÂßãÂåñ
        window.onload = function() {
            initPage();
            createHearts();
            updateCurrentTime();
            updateTimeTogether();
            showUpdateDate();
            
            // ÊØèÁßíÊõ¥Êñ∞Êó∂Èó¥
            setInterval(updateCurrentTime, 1000);
            setInterval(updateTimeTogether, 1000);
        };
    
    // ÊàíÁÉüÊâìÂç°ÂäüËÉΩÔºàÈöêËóèÂÖ•Âè£ÔºåËøûÁª≠ÁÇπÂáª‰∏ªÊ†áÈ¢ò5Ê¨°ÂºπÂá∫ÔºåÊîØÊåÅÊú¨Âú∞Â≠òÂÇ®Ôºâ
    (function(){
        // ÂÖ•Âè£ËÆæÁΩÆÔºöËøûÁª≠ÁÇπÂáª‰∏ªÊ†áÈ¢ò5Ê¨°Ëß¶Âèë
        let clickCount = 0;
        let clickTimer = null;
        const title = document.getElementById('main-title');
        if (title) {
            title.addEventListener('click', function() {
                clickCount++;
                if (clickTimer) clearTimeout(clickTimer);
                // 2ÁßíÂÜÖËøûÁª≠ÁÇπÂáªÊâçËÆ°Êï∞ÔºåÂê¶ÂàôÈáçÁΩÆ
                clickTimer = setTimeout(()=>{clickCount=0;}, 2000);
                if (clickCount >= 5) {
                    clickCount = 0;
                    showQuitSmokingModal();
                }
            });
        }

        // ÊâìÂºÄÊàíÁÉüÊâìÂç°ÂºπÁ™ó
        window.showQuitSmokingModal = function() {
            document.getElementById('quit-smoking-modal').style.display = 'flex';
            updateQuitSmokingUI();
        };
        // ÂÖ≥Èó≠ÂºπÁ™ó
        window.closeQuitSmokingModal = function() {
            document.getElementById('quit-smoking-modal').style.display = 'none';
        };

        // Ëé∑Âèñ‰ªäÂ§©Êó•ÊúüÂ≠óÁ¨¶‰∏≤Ôºàyyyy-mm-ddÔºâ
        function getTodayStr() {
            const d = new Date();
            return d.getFullYear() + '-' + (d.getMonth()+1).toString().padStart(2,'0') + '-' + d.getDate().toString().padStart(2,'0');
        }
        // Ëé∑ÂèñÊò®Â§©Êó•ÊúüÂ≠óÁ¨¶‰∏≤
        function getYesterdayStr() {
            const d = new Date();
            d.setDate(d.getDate()-1);
            return d.getFullYear() + '-' + (d.getMonth()+1).toString().padStart(2,'0') + '-' + d.getDate().toString().padStart(2,'0');
        }
        // Ëé∑ÂèñÊú¨Âú∞Â≠òÂÇ®ÁöÑÊâìÂç°Êï∞ÊçÆ
        function getQSData() {
            let data = localStorage.getItem('quitSmokingData');
            if (!data) return {days:0, lastDate:'', history:[], streak:0, maxStreak:0, achievements:[]};
            try {
                let d = JSON.parse(data);
                if (!d.history) d.history = [];
                if (!d.achievements) d.achievements = [];
                if (!d.streak) d.streak = 0;
                if (!d.maxStreak) d.maxStreak = 0;
                return d;
            } catch { return {days:0, lastDate:'', history:[], streak:0, maxStreak:0, achievements:[]}; }
        }
        // ‰øùÂ≠òÊâìÂç°Êï∞ÊçÆÂà∞Êú¨Âú∞
        function setQSData(data) {
            localStorage.setItem('quitSmokingData', JSON.stringify(data));
        }
        // Êõ¥Êñ∞ÂºπÁ™óUIÊòæÁ§∫
        function updateQuitSmokingUI() {
            const data = getQSData();
            document.getElementById('qs-days').textContent = `Á¥ØËÆ°ÊâìÂç°Ôºö${data.days||0} Â§©`;
            document.getElementById('qs-streaks').textContent = `ËøûÁª≠Ôºö${data.streak||0} Â§©  |  ÊúÄÈïøËøûÁª≠Ôºö${data.maxStreak||0} Â§©`;
            document.getElementById('qs-last-date').textContent = data.lastDate ? `‰∏äÊ¨°ÊâìÂç°Ôºö${data.lastDate}` : 'ËøòÊú™ÂºÄÂßãÊâìÂç°';
            const today = getTodayStr();
            const btn = document.getElementById('qs-punch-btn');
            if (data.history && data.history.includes(today)) {
                btn.disabled = true;
                btn.textContent = '‰ªäÊó•Â∑≤ÊâìÂç°';
                document.getElementById('qs-msg').textContent = getEncourageMsg(data.streak||0);
            } else {
                btn.disabled = false;
                btn.textContent = '‰ªäÊó•ÊâìÂç°';
                document.getElementById('qs-msg').textContent = '';
            }
            // ÊâìÂç°ÂéÜÂè≤
            renderQSHistory(data.history||[]);
        }
        // ÈºìÂä±ËØ≠
        function getEncourageMsg(streak) {
            if (streak >= 30) return '‰Ω†Â∑≤ÁªèÂùöÊåÅ30Â§©ÔºåË∂ÖÊ£íÔºÅÁªßÁª≠‰øùÊåÅÔºÅ';
            if (streak >= 14) return '‰∏§Âë®‰∏çÊòìÔºå‰π†ÊÉØÊ≠£Âú®ÂÖªÊàêÔºÅ';
            if (streak >= 7) return '‰∏ÄÂë®ÊàêÂ∞±ËææÊàêÔºÅÁªßÁª≠Âä†Ê≤πÔºÅ';
            if (streak >= 3) return 'Â∑≤ÁªèÂùöÊåÅ3Â§©ÔºåËøàÂá∫ÈáçË¶Å‰∏ÄÊ≠•ÔºÅ';
            if (streak > 0) return 'ÁªßÁª≠Âä†Ê≤πÔºÅÊØè‰∏ÄÂ§©ÈÉΩÂÄºÂæóÈ™ÑÂÇ≤~';
            return '';
        }
        // ÊâìÂç°ÂéÜÂè≤Ê∏≤Êüì
        function renderQSHistory(history) {
            const el = document.getElementById('qs-history');
            if (!history || history.length === 0) {
                el.innerHTML = '<span style="color:#bbb;">ÊöÇÊó†ÊâìÂç°ËÆ∞ÂΩï</span>';
                return;
            }
            // ÂèñÊúÄËøë7Â§©
            let arr = [];
            let today = new Date();
            for (let i = 6; i >= 0; i--) {
                let d = new Date(today);
                d.setDate(d.getDate()-i);
                let ds = d.getFullYear()+'-'+(d.getMonth()+1).toString().padStart(2,'0')+'-'+d.getDate().toString().padStart(2,'0');
                arr.push(ds);
            }
            let html = '<b>ÊúÄËøë7Â§©Ôºö</b><br>';
            arr.forEach(date => {
                if (history.includes(date)) {
                    html += `<span style='color:#4caf50;'>‚úîÔ∏è${date}</span> `;
                } else {
                    html += `<span style='color:#bbb;'>‚úñÔ∏è${date}</span> `;
                }
            });
            el.innerHTML = html;
        }
        // ÁÇπÂáª"‰ªäÊó•ÊâìÂç°"ÊåâÈíÆÈÄªËæë
        function punchQS() {
            let data = getQSData();
            const today = getTodayStr();
            const yesterday = getYesterdayStr();
            if (!data.history) data.history = [];
            if (!data.achievements) data.achievements = [];
            // ËøûÁª≠Â§©Êï∞Âà§Êñ≠
            if (data.history.length > 0 && data.history[data.history.length-1] === yesterday) {
                data.streak = (data.streak||0) + 1;
            } else if (data.history.length > 0 && data.history[data.history.length-1] === today) {
                // Â∑≤ÊâìÂç°
            } else {
                data.streak = 1;
            }
            if (!data.history.includes(today)) {
                data.history.push(today);
                data.days = data.history.length;
                data.lastDate = today;
                if (!data.maxStreak || data.streak > data.maxStreak) data.maxStreak = data.streak;
                setQSData(data);
                checkQSAchievements(data);
            }
            updateQuitSmokingUI();
        }
        // ÊàêÂ∞±Ê£ÄÊµã
        function checkQSAchievements(data) {
            const achs = [
                {streak:3, msg:'üéâ ËøûÁª≠ÊâìÂç°3Â§©ÊàêÂ∞±ËææÊàêÔºÅ‰π†ÊÉØÂÖªÊàêÁ¨¨‰∏ÄÊ≠•ÔºÅ'},
                {streak:7, msg:'üèÖ ËøûÁª≠ÊâìÂç°7Â§©ÊàêÂ∞±ËææÊàêÔºÅ‰∏ÄÂë®‰∏çÊòìÔºåÁªßÁª≠Âä†Ê≤πÔºÅ'},
                {streak:14, msg:'ü•à ËøûÁª≠ÊâìÂç°14Â§©ÊàêÂ∞±ËææÊàêÔºÅ‰Ω†Â∑≤ÁªèÂæàÊ£í‰∫ÜÔºÅ'},
                {streak:30, msg:'üèÜ ËøûÁª≠ÊâìÂç°30Â§©ÊàêÂ∞±ËææÊàêÔºÅ‰Ω†Â∑≤ÁªèÊàòËÉú‰∫ÜËá™Â∑±ÔºÅ'}
            ];
            for (let i=0;i<achs.length;i++) {
                if (data.streak === achs[i].streak && !data.achievements.includes(achs[i].streak)) {
                    data.achievements.push(achs[i].streak);
                    setQSData(data);
                    setTimeout(()=>{
                        showQSAchievement(achs[i].msg);
                    }, 300);
                }
            }
        }
        // ÊàêÂ∞±ÂºπÁ™ó
        function showQSAchievement(msg) {
            const div = document.createElement('div');
            div.style.position = 'fixed';
            div.style.top = '30%';
            div.style.left = '50%';
            div.style.transform = 'translate(-50%,-50%)';
            div.style.background = '#fff6fa';
            div.style.color = '#ff6b9e';
            div.style.padding = '1.2rem 2rem';
            div.style.borderRadius = '18px';
            div.style.fontSize = '1.2rem';
            div.style.boxShadow = '0 8px 32px #0003';
            div.style.zIndex = 100001;
            div.textContent = msg;
            document.body.appendChild(div);
            setTimeout(()=>{div.remove();}, 2600);
        }
        // ÈáçÁΩÆÊâìÂç°
        function resetQS() {
            if (confirm('Á°ÆÂÆöË¶ÅÈáçÁΩÆÊâÄÊúâÊâìÂç°Êï∞ÊçÆÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§ç„ÄÇ')) {
                localStorage.removeItem('quitSmokingData');
                updateQuitSmokingUI();
            }
        }
        // ÁªëÂÆöÊåâÈíÆ‰∫ã‰ª∂
        document.getElementById('qs-punch-btn').onclick = punchQS;
        document.getElementById('qs-reset-btn').onclick = resetQS;
    })();
    </script>
</body>
    </div>
    <!-- ÈöêÁßÅÈÅÆÁΩ©Â∑≤ÁßªÈô§ÔºåÈ°µÈù¢ÂÜÖÂÆπÊÅ¢Â§çÂèØËßÅ -->
    </html>