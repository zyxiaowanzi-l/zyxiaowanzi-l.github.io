<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è…¾è®¯äº‘SDKåŠ è½½æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        h1 {
            text-align: center;
            color: #fff;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            border-left: 4px solid #4CAF50;
        }
        .test-button {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        .test-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        .result {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .success { border-left-color: #4CAF50; }
        .error { border-left-color: #f44336; }
        .warning { border-left-color: #ff9800; }
        .info { border-left-color: #2196F3; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ è…¾è®¯äº‘SDKåŠ è½½æµ‹è¯•</h1>
        
        <div class="test-section">
            <h3>ğŸ“ æ–‡ä»¶æ£€æŸ¥</h3>
            <button class="test-button" onclick="checkFiles()">æ£€æŸ¥SDKæ–‡ä»¶</button>
            <div id="fileResult" class="result"></div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ“¥ SDKåŠ è½½æµ‹è¯•</h3>
            <button class="test-button" onclick="testSDKLoad()">æµ‹è¯•SDKåŠ è½½</button>
            <div id="sdkResult" class="result"></div>
        </div>
        
        <div class="test-section">
            <h3>ğŸŒ ç½‘ç»œè¿æ¥æµ‹è¯•</h3>
            <button class="test-button" onclick="testNetwork()">æµ‹è¯•ç½‘ç»œè¿æ¥</button>
            <div id="networkResult" class="result"></div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ” å…¨å±€å¯¹è±¡æ£€æŸ¥</h3>
            <button class="test-button" onclick="checkGlobalObjects()">æ£€æŸ¥å…¨å±€å¯¹è±¡</button>
            <div id="globalResult" class="result"></div>
        </div>
        
        <div class="test-section">
            <h3>ğŸš€ å®Œæ•´æµ‹è¯•</h3>
            <button class="test-button" onclick="runFullTest()">è¿è¡Œå®Œæ•´æµ‹è¯•</button>
            <div id="fullResult" class="result"></div>
        </div>
    </div>

    <script>
        // æµ‹è¯•ç»“æœè®°å½•
        let testResults = [];
        
        function logResult(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            const timestamp = new Date().toLocaleTimeString();
            const logMessage = `[${timestamp}] ${message}\n`;
            
            element.textContent += logMessage;
            element.scrollTop = element.scrollTop + 1000;
            
            // æ·»åŠ ç±»å‹æ ‡è¯†
            element.className = `result ${type}`;
            
            // è®°å½•ç»“æœ
            testResults.push({ timestamp, message, type });
        }
        
        // æ£€æŸ¥SDKæ–‡ä»¶
        async function checkFiles() {
            const elementId = 'fileResult';
            logResult(elementId, 'å¼€å§‹æ£€æŸ¥SDKæ–‡ä»¶...', 'info');
            
            try {
                // æ£€æŸ¥æœ¬åœ°æ–‡ä»¶
                const response = await fetch('tencent-cloud-sdk/tencentcloud-sdk-js.min.js');
                if (response.ok) {
                    const size = response.headers.get('content-length');
                    logResult(elementId, `âœ… æœ¬åœ°SDKæ–‡ä»¶å­˜åœ¨ (${size} å­—èŠ‚)`, 'success');
                } else {
                    logResult(elementId, `âŒ æœ¬åœ°SDKæ–‡ä»¶è®¿é—®å¤±è´¥: ${response.status}`, 'error');
                }
            } catch (error) {
                logResult(elementId, `âŒ æœ¬åœ°SDKæ–‡ä»¶æ£€æŸ¥å¤±è´¥: ${error.message}`, 'error');
            }
            
            // æ£€æŸ¥CDNæ–‡ä»¶
            const cdnUrls = [
                'https://unpkg.com/tencentcloud-sdk-js@latest/dist/tencentcloud-sdk-js.min.js',
                'https://cdn.jsdelivr.net/npm/tencentcloud-sdk-js@latest/dist/tencentcloud-sdk-js.min.js'
            ];
            
            for (const url of cdnUrls) {
                try {
                    const response = await fetch(url, { mode: 'no-cors' });
                    logResult(elementId, `âœ… CDNæ–‡ä»¶å¯è®¿é—®: ${url}`, 'success');
                } catch (error) {
                    logResult(elementId, `âŒ CDNæ–‡ä»¶ä¸å¯è®¿é—®: ${url}`, 'error');
                }
            }
        }
        
        // æµ‹è¯•SDKåŠ è½½
        async function testSDKLoad() {
            const elementId = 'sdkResult';
            logResult(elementId, 'å¼€å§‹æµ‹è¯•SDKåŠ è½½...', 'info');
            
            try {
                // å°è¯•åŠ è½½æœ¬åœ°SDK
                logResult(elementId, 'æ­£åœ¨åŠ è½½æœ¬åœ°SDK...', 'info');
                const script = document.createElement('script');
                script.src = 'tencent-cloud-sdk/tencentcloud-sdk-js.min.js';
                
                const loadPromise = new Promise((resolve, reject) => {
                    script.onload = () => resolve(true);
                    script.onerror = () => reject(new Error('åŠ è½½å¤±è´¥'));
                    setTimeout(() => reject(new Error('åŠ è½½è¶…æ—¶')), 10000);
                });
                
                document.head.appendChild(script);
                
                await loadPromise;
                logResult(elementId, 'âœ… æœ¬åœ°SDKåŠ è½½æˆåŠŸ', 'success');
                
                // æ£€æŸ¥å…¨å±€å¯¹è±¡
                setTimeout(() => {
                    if (typeof TencentCloud !== 'undefined') {
                        logResult(elementId, 'âœ… å…¨å±€å¯¹è±¡ TencentCloud å·²å®šä¹‰', 'success');
                        logResult(elementId, `SDKç‰ˆæœ¬ä¿¡æ¯: ${JSON.stringify(TencentCloud, null, 2)}`, 'info');
                    } else {
                        logResult(elementId, 'âŒ å…¨å±€å¯¹è±¡ TencentCloud æœªå®šä¹‰', 'error');
                    }
                }, 1000);
                
            } catch (error) {
                logResult(elementId, `âŒ SDKåŠ è½½å¤±è´¥: ${error.message}`, 'error');
            }
        }
        
        // æµ‹è¯•ç½‘ç»œè¿æ¥
        async function testNetwork() {
            const elementId = 'networkResult';
            logResult(elementId, 'å¼€å§‹æµ‹è¯•ç½‘ç»œè¿æ¥...', 'info');
            
            const testUrls = [
                'https://www.tencentcloud.com',
                'https://iai.tencentcloudapi.com',
                'https://unpkg.com',
                'https://cdn.jsdelivr.net'
            ];
            
            for (const url of testUrls) {
                try {
                    const response = await fetch(url, { 
                        method: 'HEAD',
                        mode: 'no-cors'
                    });
                    logResult(elementId, `âœ… ${url} è¿æ¥æˆåŠŸ`, 'success');
                } catch (error) {
                    logResult(elementId, `âŒ ${url} è¿æ¥å¤±è´¥: ${error.message}`, 'error');
                }
            }
        }
        
        // æ£€æŸ¥å…¨å±€å¯¹è±¡
        function checkGlobalObjects() {
            const elementId = 'globalResult';
            logResult(elementId, 'å¼€å§‹æ£€æŸ¥å…¨å±€å¯¹è±¡...', 'info');
            
            const objects = [
                'TencentCloud',
                'window.TencentCloud',
                'globalThis.TencentCloud'
            ];
            
            objects.forEach(objName => {
                try {
                    const obj = eval(objName);
                    if (obj) {
                        logResult(elementId, `âœ… ${objName} å·²å®šä¹‰`, 'success');
                        logResult(elementId, `ç±»å‹: ${typeof obj}`, 'info');
                    } else {
                        logResult(elementId, `âŒ ${objName} æœªå®šä¹‰`, 'error');
                    }
                } catch (error) {
                    logResult(elementId, `âŒ ${objName} æ£€æŸ¥å¤±è´¥: ${error.message}`, 'error');
                }
            });
        }
        
        // è¿è¡Œå®Œæ•´æµ‹è¯•
        async function runFullTest() {
            const elementId = 'fullResult';
            logResult(elementId, 'ğŸš€ å¼€å§‹è¿è¡Œå®Œæ•´æµ‹è¯•...', 'info');
            
            // æ¸…ç©ºä¹‹å‰çš„ç»“æœ
            testResults = [];
            
            // æŒ‰é¡ºåºè¿è¡Œæµ‹è¯•
            await checkFiles();
            await testNetwork();
            await testSDKLoad();
            setTimeout(checkGlobalObjects, 2000);
            
            logResult(elementId, 'ğŸ‰ å®Œæ•´æµ‹è¯•å®Œæˆï¼', 'success');
            
            // ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
            const successCount = testResults.filter(r => r.type === 'success').length;
            const errorCount = testResults.filter(r => r.type === 'error').length;
            const totalCount = testResults.length;
            
            logResult(elementId, `\nğŸ“Š æµ‹è¯•æŠ¥å‘Š:`, 'info');
            logResult(elementId, `æ€»æµ‹è¯•æ•°: ${totalCount}`, 'info');
            logResult(elementId, `æˆåŠŸ: ${successCount}`, 'success');
            logResult(elementId, `å¤±è´¥: ${errorCount}`, errorCount > 0 ? 'error' : 'success');
            logResult(elementId, `æˆåŠŸç‡: ${((successCount / totalCount) * 100).toFixed(1)}%`, 'info');
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è¿è¡ŒåŸºç¡€æ£€æŸ¥
        window.addEventListener('load', () => {
            setTimeout(() => {
                logResult('fullResult', 'ğŸ”„ é¡µé¢åŠ è½½å®Œæˆï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•...', 'info');
            }, 1000);
        });
    </script>
</body>
</html>
